<% include ../partials/header %>
<div class="container">
    <h2 style="text-align: center">Add Students <%= day.date %></h2>
    <span class="hidden" id="dayId"><%= day._id %></span>
    <div class="row">
        <div class="col-sm-10">
            <div class="row" style="display:flex; flex-wrap: wrap;">
                <% day.slots.forEach(function(slot){ %>
                    <div class="col-sm-3">
                        <strong><%= slot.time %></strong><span>
                        <% var remaining = slot.max - slot.students.length; %>   
                        <% if (remaining > 0) { %>
                            <%= " (" + remaining + ")" %></span>
                            <% } %>
                    <ul class="list-group">
                        <% slot.students.forEach(function(student){ %>
                            <% if (student.school == school) { %>
                                <li class="list-group-item" style="height: 25px; padding: 2px 10px;" name="schedStud">
                                    <data value=<%= student._id %>><%= student.fullName %></data></li>
                            <% } %>
                        <% }) %>
                    </ul>                        
                        <% if (remaining > 0) { %>
                            <form method="POST">
                                <div class="form-group">
                                    <input class="hidden" type="text" name="slotId" value="<%= slot._id %>">
                                    <button type=submit disabled=disabled name="addStudentBtn"><span class="glyphicon glyphicon-plus"></span></button>
                                </div>
                            </form>
                        <% } %>
                    </div>
                <% }) %>
            </div>
        </div>
        <div class="col-sm-2">
            <h4>Unscheduled:</h4>
            <ul class="list-group">
                <% students.forEach(function(student) { %>
                    <li class="list-group-item" style="height: 30px; padding: 5px 15px;" name="unschedStud"><%= student.fullName + "(" + student.grade + ")"%>
                    <span name="studentId" class="hidden"><%= student._id %></span></li>
                <% }) %>
            </ul>
        </div>  
    </div>
    <div style="width: 30%; margin: 25px auto;"class="well">
          <a href="/events/<%= event._id %>/days">Go Back</a>
    </div> 
</div>
 
<script src="/scripts/selectStudent.js"></script>
<% include ../partials/footer %>
